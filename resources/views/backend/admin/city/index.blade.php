@extends('backend.index')
@section('content')
 <!-- Mani section header and breadcrumb -->
<div class="mainSection-title">
    <div class="row">
      <div class="col-12">
        <div
          class="d-flex justify-content-between align-items-center flex-wrap gr-15"
        >
          <div class="d-flex flex-column">
            <h4>{{ get_phrase('List of State & Cities') }}</h4>
            <ul class="d-flex align-items-center eBreadcrumb-2">
              <li><a href="#">{{ get_phrase('Home') }}</a></li>
              <li><a href="#"> {{ get_phrase('States & Cities') }}</a></li>
            </ul>
          </div>
          <div class="export-btn-area d-flex">
            <a href="#" class="export_btn mr--20" onclick="rightModal('{{ route('admin.AddStatesModal') }}', 'Add new State')">{{ get_phrase('Add new State') }} </a>
            <a href="#" class="export_btn" onclick="rightModal('{{ route('admin.AddCitiesModal') }}', 'Add new City' )">{{ get_phrase('Add new Cities')}} </a>
          </div>
        </div>
      </div>
    </div>
</div>

<!-- Start City/State area -->
@if(count($states) > 0)
<div class="row">
  @foreach($states as $state)
  <div class="col-lg-4 col-md-6">
    <div class="l-city-item">
      <div class="top d-flex justify-content-between align-items-center">
        <div class="left">
          <!-- Country name -->
          <div class="country-name">
            <div class="icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M11.7342 9.50833L9.23417 7.55083C7.7225 6.36917 5.61083 6.36833 4.09917 7.55083L1.59917 9.5075C0.5825 10.3033 0 11.4992 0 12.7892V16.2492C0 18.3167 1.6825 19.9992 3.75 19.9992H9.58333C11.6508 19.9992 13.3333 18.3167 13.3333 16.2492V12.7892C13.3333 11.4992 12.7508 10.305 11.7342 9.50833ZM8.33333 15C8.33333 15.46 7.96 15.8333 7.5 15.8333H5.83333C5.37333 15.8333 5 15.46 5 15V13.3333C5 12.8733 5.37333 12.5 5.83333 12.5H7.5C7.96 12.5 8.33333 12.8733 8.33333 13.3333V15ZM15.8333 0H12.5C10.2025 0 8.33333 1.86917 8.33333 4.16667V5.255C9.01583 5.45917 9.67167 5.7775 10.26 6.2375L12.7617 8.19667C14.1842 9.31 15 10.985 15 12.79V15C15 14.5392 15.3725 14.1667 15.8333 14.1667H16.6667C17.1275 14.1667 17.5 14.5392 17.5 15C17.5 15.4608 17.1275 15.8333 16.6667 15.8333H15.8333C15.3725 15.8333 15 15.4608 15 15V16.25C15 17.705 14.42 19.0258 13.4825 20H15.8333C18.1308 20 20 18.1308 20 15.8333V4.16667C20 1.86917 18.1308 0 15.8333 0ZM12.5 5.83333H11.6667C11.2058 5.83333 10.8333 5.46083 10.8333 5C10.8333 4.53917 11.2058 4.16667 11.6667 4.16667H12.5C12.9608 4.16667 13.3333 4.53917 13.3333 5C13.3333 5.46083 12.9608 5.83333 12.5 5.83333ZM16.6667 12.5H15.8333C15.3725 12.5 15 12.1275 15 11.6667C15 11.2058 15.3725 10.8333 15.8333 10.8333H16.6667C17.1275 10.8333 17.5 11.2058 17.5 11.6667C17.5 12.1275 17.1275 12.5 16.6667 12.5ZM16.6667 9.16667H15.8333C15.3725 9.16667 15 8.79417 15 8.33333C15 7.8725 15.3725 7.5 15.8333 7.5H16.6667C17.1275 7.5 17.5 7.8725 17.5 8.33333C17.5 8.79417 17.1275 9.16667 16.6667 9.16667ZM16.6667 5.83333H15.8333C15.3725 5.83333 15 5.46083 15 5C15 4.53917 15.3725 4.16667 15.8333 4.16667H16.6667C17.1275 4.16667 17.5 4.53917 17.5 5C17.5 5.46083 17.1275 5.83333 16.6667 5.83333Z"
                  fill="#181C32"
                />
              </svg>
            </div>
            <p>{{ ucfirst($state->state_to_country->name) }}</p>
          </div>
          <!-- City name -->
          <h4 class="city-name">{{ ucfirst($state->title) }}</h4>
          <!-- City numbers -->
          <p class="info">{{ get_phrase('Number of Cities')." : ".count($state->state_to_city) }}</p>
        </div>
        <div class="right">
          <div class="icons">
            <button type="button" href="#" onclick="rightModal('{{ route('admin.EditStatesModal',['id'=> $state->id ]) }}', ' {{ get_phrase('Update state'); }} ')">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M13.3352 7.56584C13.5542 7.56584 13.7612 7.46447 13.8952 7.29152C14.0292 7.11856 14.0759 6.89316 14.0221 6.68122C13.8016 5.81857 13.3522 5.03035 12.7228 4.40091L10.2525 1.93064C9.31544 0.993567 8.06932 0.477539 6.7438 0.477539H3.54344C1.5899 0.477539 0 2.06744 0 4.02169V13.9453C0 15.8995 1.5899 17.4895 3.54415 17.4895H5.67064C6.06191 17.4895 6.37947 17.1719 6.37947 16.7806C6.37947 16.3893 6.06191 16.0718 5.67064 16.0718H3.54415C2.37174 16.0718 1.41766 15.1177 1.41766 13.9453V4.02169C1.41766 2.84928 2.37174 1.8952 3.54415 1.8952H6.74451C6.86005 1.8952 6.97488 1.90087 7.0883 1.9115V5.43935C7.0883 6.61175 8.04238 7.56584 9.21478 7.56584H13.3352ZM8.50595 5.43935V2.36232C8.7746 2.51684 9.02482 2.70823 9.25023 2.93363L11.7205 5.40391C11.9431 5.62648 12.1337 5.8774 12.2897 6.14818H9.21478C8.82422 6.14818 8.50595 5.82991 8.50595 5.43935ZM16.3896 8.89773C15.5857 8.09391 14.1851 8.09391 13.382 8.89773L8.62787 13.6518C8.09271 14.187 7.79713 14.8994 7.79713 15.6571V16.7813C7.79713 17.1726 8.11468 17.4902 8.50595 17.4902H9.63016C10.3879 17.4902 11.0996 17.1946 11.6347 16.6594L16.3888 11.9053C16.7908 11.5034 17.0119 10.9696 17.0119 10.4012C17.0119 9.83267 16.7908 9.29892 16.3896 8.89773ZM15.3866 10.9023L10.6317 15.6564C10.3645 15.9244 10.0087 16.0718 9.62945 16.0718H9.21408V15.6564C9.21408 15.2779 9.36151 14.9221 9.62945 14.6541L14.3843 9.90001C14.6515 9.63207 15.1186 9.63207 15.3866 9.90001C15.5205 10.0333 15.5943 10.2112 15.5943 10.4012C15.5943 10.5911 15.5205 10.7683 15.3866 10.9023Z"
                  fill="#797C8B"
                />
              </svg>
            </button>
            <button type="button" href="#" onclick="confirmModal('{{ route('admin.DeleteState',['id'=> $state->id ]) }}', 'undefined')">
              <svg width="14" height="17" viewBox="0 0 14 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M5.32812 1.71328L4.73438 2.65625H9.26562L8.67188 1.71328C8.625 1.64023 8.54688 1.59375 8.4625 1.59375H5.53438C5.45 1.59375 5.37187 1.63691 5.325 1.71328H5.32812ZM9.92188 0.830078L11.0688 2.65625H11.5H13H13.25C13.6656 2.65625 14 3.01152 14 3.45312C14 3.89473 13.6656 4.25 13.25 4.25H13V14.3438C13 15.8113 11.8812 17 10.5 17H3.5C2.11875 17 1 15.8113 1 14.3438V4.25H0.75C0.334375 4.25 0 3.89473 0 3.45312C0 3.01152 0.334375 2.65625 0.75 2.65625H1H2.5H2.93125L4.07812 0.826758C4.40312 0.312109 4.95 0 5.53438 0H8.4625C9.04688 0 9.59375 0.312109 9.91875 0.826758L9.92188 0.830078ZM2.5 4.25V14.3438C2.5 14.9314 2.94687 15.4062 3.5 15.4062H10.5C11.0531 15.4062 11.5 14.9314 11.5 14.3438V4.25H2.5ZM5 6.375V13.2812C5 13.5734 4.775 13.8125 4.5 13.8125C4.225 13.8125 4 13.5734 4 13.2812V6.375C4 6.08281 4.225 5.84375 4.5 5.84375C4.775 5.84375 5 6.08281 5 6.375ZM7.5 6.375V13.2812C7.5 13.5734 7.275 13.8125 7 13.8125C6.725 13.8125 6.5 13.5734 6.5 13.2812V6.375C6.5 6.08281 6.725 5.84375 7 5.84375C7.275 5.84375 7.5 6.08281 7.5 6.375ZM10 6.375V13.2812C10 13.5734 9.775 13.8125 9.5 13.8125C9.225 13.8125 9 13.5734 9 13.2812V6.375C9 6.08281 9.225 5.84375 9.5 5.84375C9.775 5.84375 10 6.08281 10 6.375Z"
                  fill="#A1A3AE"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
      <ul class="city-items">
        @foreach($state->state_to_city as $city)
        <li class="city-item">
          <div class="content">
            <div class="icon">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M14.6667 3.81828V1.33608C14.6667 0.968152 14.3687 0.669541 14 0.669541C13.6313 0.669541 13.3333 0.968152 13.3333 1.33608V2.91312L9.86467 0.572893C8.732 -0.190964 7.268 -0.190964 6.13533 0.572893L1.46867 3.72164C0.549333 4.34219 0 5.37466 0 6.48445V12.6673C0 14.5049 1.49533 16 3.33333 16H4.66667C5.03533 16 5.33333 15.7014 5.33333 15.3335V9.33458C5.33333 8.96732 5.632 8.66804 6 8.66804H10C10.368 8.66804 10.6667 8.96732 10.6667 9.33458V15.3335C10.6667 15.7014 10.9647 16 11.3333 16H12.6667C14.5047 16 16 14.5049 16 12.6673V6.48445C16 5.43065 15.504 4.44617 14.6667 3.81828Z"
                  fill="#9194A0"
                />
              </svg>
            </div>
            <p>{{ ucfirst($city->title) }}</p>
          </div>
          <div class="edit-icon">
            <button type="button" href="#" onclick="rightModal('{{ route('admin.EditCitiesModal',['id'=> $city->id ]) }}', ' {{ get_phrase('Update City'); }} ')">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M13.3352 7.56584C13.5542 7.56584 13.7612 7.46447 13.8952 7.29152C14.0292 7.11856 14.0759 6.89316 14.0221 6.68122C13.8016 5.81857 13.3522 5.03035 12.7228 4.40091L10.2525 1.93064C9.31544 0.993567 8.06932 0.477539 6.7438 0.477539H3.54344C1.5899 0.477539 0 2.06744 0 4.02169V13.9453C0 15.8995 1.5899 17.4895 3.54415 17.4895H5.67064C6.06191 17.4895 6.37947 17.1719 6.37947 16.7806C6.37947 16.3893 6.06191 16.0718 5.67064 16.0718H3.54415C2.37174 16.0718 1.41766 15.1177 1.41766 13.9453V4.02169C1.41766 2.84928 2.37174 1.8952 3.54415 1.8952H6.74451C6.86005 1.8952 6.97488 1.90087 7.0883 1.9115V5.43935C7.0883 6.61175 8.04238 7.56584 9.21478 7.56584H13.3352ZM8.50595 5.43935V2.36232C8.7746 2.51684 9.02482 2.70823 9.25023 2.93363L11.7205 5.40391C11.9431 5.62648 12.1337 5.8774 12.2897 6.14818H9.21478C8.82422 6.14818 8.50595 5.82991 8.50595 5.43935ZM16.3896 8.89773C15.5857 8.09391 14.1851 8.09391 13.382 8.89773L8.62787 13.6518C8.09271 14.187 7.79713 14.8994 7.79713 15.6571V16.7813C7.79713 17.1726 8.11468 17.4902 8.50595 17.4902H9.63016C10.3879 17.4902 11.0996 17.1946 11.6347 16.6594L16.3888 11.9053C16.7908 11.5034 17.0119 10.9696 17.0119 10.4012C17.0119 9.83267 16.7908 9.29892 16.3896 8.89773ZM15.3866 10.9023L10.6317 15.6564C10.3645 15.9244 10.0087 16.0718 9.62945 16.0718H9.21408V15.6564C9.21408 15.2779 9.36151 14.9221 9.62945 14.6541L14.3843 9.90001C14.6515 9.63207 15.1186 9.63207 15.3866 9.90001C15.5205 10.0333 15.5943 10.2112 15.5943 10.4012C15.5943 10.5911 15.5205 10.7683 15.3866 10.9023Z"
                  fill="#797C8B"
                />
              </svg>
            </button>
            <button type="button" href="#" onclick="confirmModal('{{ route('admin.DeleteCities',['id'=> $city->id ]) }}', 'undefined')">
              <svg width="14" height="17" viewBox="0 0 14 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M5.32812 1.71328L4.73438 2.65625H9.26562L8.67188 1.71328C8.625 1.64023 8.54688 1.59375 8.4625 1.59375H5.53438C5.45 1.59375 5.37187 1.63691 5.325 1.71328H5.32812ZM9.92188 0.830078L11.0688 2.65625H11.5H13H13.25C13.6656 2.65625 14 3.01152 14 3.45312C14 3.89473 13.6656 4.25 13.25 4.25H13V14.3438C13 15.8113 11.8812 17 10.5 17H3.5C2.11875 17 1 15.8113 1 14.3438V4.25H0.75C0.334375 4.25 0 3.89473 0 3.45312C0 3.01152 0.334375 2.65625 0.75 2.65625H1H2.5H2.93125L4.07812 0.826758C4.40312 0.312109 4.95 0 5.53438 0H8.4625C9.04688 0 9.59375 0.312109 9.91875 0.826758L9.92188 0.830078ZM2.5 4.25V14.3438C2.5 14.9314 2.94687 15.4062 3.5 15.4062H10.5C11.0531 15.4062 11.5 14.9314 11.5 14.3438V4.25H2.5ZM5 6.375V13.2812C5 13.5734 4.775 13.8125 4.5 13.8125C4.225 13.8125 4 13.5734 4 13.2812V6.375C4 6.08281 4.225 5.84375 4.5 5.84375C4.775 5.84375 5 6.08281 5 6.375ZM7.5 6.375V13.2812C7.5 13.5734 7.275 13.8125 7 13.8125C6.725 13.8125 6.5 13.5734 6.5 13.2812V6.375C6.5 6.08281 6.725 5.84375 7 5.84375C7.275 5.84375 7.5 6.08281 7.5 6.375ZM10 6.375V13.2812C10 13.5734 9.775 13.8125 9.5 13.8125C9.225 13.8125 9 13.5734 9 13.2812V6.375C9 6.08281 9.225 5.84375 9.5 5.84375C9.775 5.84375 10 6.08281 10 6.375Z"
                  fill="#797C8B"
                />
              </svg>
            </button>
          </div>
        </li>
        @endforeach
      </ul>
    </div>
  </div>
  @endforeach
</div>
@else
<div class="row">
  <div class="col-12">
    <div class="eSection-wrap">
      @include('backend.admin.no_data_found')
    </div>
  </div>
</div>
@endif
<!-- End City/State area -->
@endsection

@section('js')
<script>
    "use strict";

    function load_countrys_state(country_id)
    {


        if(country_id != '')
        {
            var country_id = $('#country_id').val();
            var url="{{ route('get_state_by_country') }}";
            $.ajax({
                url: url,
                data:{country_id:country_id},
            success : function(response)
            {

            jQuery('#state_id').html(response);
            }
        });
        }
        else
        jQuery('#state_id').html('<option value="">{{ get_phrase("Select Country First") }}</option>');
    }

</script>
@endsection
